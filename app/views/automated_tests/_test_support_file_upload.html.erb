<div class="test_support_file">
<%= form_for test_support_file,
       :url => update_support_assignment_automated_tests_path,
       :remote => true,
       :method => "PUT",
       :html => {:multipart => true} do |f| %>

    <%= hidden_field_tag :support_id, f.object.id, :class => "support_id" %>
    <%= hidden_field_tag :is_new, is_new, :class => "is_new" %>

    <fieldset>
      <legend> <%= f.object.file_name %> </legend>

      <div class="ajax_message"></div>

      <% if !f.object.new_record? %>
        <%# Test Support File already exists %>
          <div class="settings_left_side">
            <%= f.label :description, t('automated_tests.script_option.description'), :style => 'vertical-align:top;' %>
            <%= f.text_area :description, :value => f.object.description, :cols => 30, :rows => 3 %> 
          </div>
          <div>
            <%= f.label :file_name, t('automated_tests.replace') %>
            <%= f.file_field :file_name, :class => 'upload_file', :size=>"30" %><br/>

            <span class="label">
              <%= link_to(t(:download),
                          :action => 'download', 
                          :assignment_id => @assignment.id,
                          :type => 'support',
                          :filename => f.object.file_name) %>
            </span>
            <br/>

          </div>

      <% else %>
        <%# Test Support File does not exist -- it is new %>
          <%= raw t('automated_tests.upload_required') %>
          <%= f.file_field :file_name, :class => 'upload_file', :size=>"30" %>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

          <%= t('automated_tests.script_option.description') %>
          <%= f.text_area :description,
                          :cols => 30, :rows => 1,
                          :style => "vertical-align:middle;" %> 
      <% end %>

      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      <%= button_tag I18n.t('automated_tests.submit'), :type => "button", :disable_with => I18n.t('working'), :class => 'submit_test_script_support' %>
      <%= button_tag I18n.t('automated_tests.remove_file'), :type => "button", :disable_with => I18n.t('working'), :class => 'remove_test_script_support', :action => remove_support_assignment_automated_tests_path %>
    </fieldset>
<% end %>
</div>
